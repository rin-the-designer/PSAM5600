claude-4-sonnet

Build a web-based MIDI drum pad using the Strudel Web package (https://codeberg.org/uzu/strudel/src/branch/main/packages/web). Functional requirements: UI: 4×4 grid of pads in dark mode, boxed/outlined brutalist style (bold borders, no border radius), inspired by Teenage Engineering. Use IBM Plex Mono. Pads highlight on hit. Include Play/Stop buttons, a BPM numeric input, and a minimal Settings page (no bank selection). Pad/Key mapping: Map exactly to 1234qwerasdfzxcv → 16 pad positions. Each pad/key triggers one of Strudel’s default sounds; multiple pads can play together. Audio playback: Do not load local audio or banks; use Strudel’s default sounds only. On pad hit (click or mapped key), play instantly with low latency; pads must work independently of the transport. Strudel integration: Show a Strudel code editor panel. Every pad hit appends its token into the current pattern string and updates the editor text, for example: $: s(“bd sd hh oh”). Provide a preset “basic 8-beat” example: $: s(“hh4, bd sd”). Play/Stop evaluates the editor content via Strudel Web API; pads continue to trigger directly during transport. Keyboard behavior (critical): The pad keys must not interfere with other inputs or shortcuts. Listen on keydown only when the pad surface has focus or an explicit “Pad Mode” toggle is ON. Do not handle keys if the active element is an input, textarea, contenteditable, or the Strudel editor. Ignore events with meta/ctrl/alt keys pressed. When handling mapped keys, call preventDefault and stopPropagation so the browser does not scroll or trigger page shortcuts, but only while Pad Mode is active. Provide a visible focus ring or Pad Mode indicator and an easy way to exit Pad Mode (Esc or clicking outside). Error handling: If audioCtx.state === “suspended”, show an overlay “Enable Sound” button that resumes the context; ignore/unset any Permissions-Policy: browsing-topics headers or warnings. Init flow: 1) Use Strudel’s default samples, 2) bind pad click and conditional key listeners per the keyboard rules above, 3) set up Strudel editor and transport, 4) initialize the editor with preset $: s(“hh4, bd sd”). Acceptance criteria: No 404s, all 16 pads play instantly with default Strudel sounds, editor mirrors pad activity, Play/Stop runs Strudel patterns, UI matches the specified brutalist grid style, and mapped keys never fire while typing in inputs/textareas/the editor or when common browser/OS shortcuts are used. Note: This is for testing on Chrome.
